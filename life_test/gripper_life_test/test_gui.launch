<launch>
  <!-- Robot desc and etherCAT -->
  <param name="robot_description" command="$(find xacro)/xacro.py '$(find life_test)/gripper_life_test/grip_pic.urdf.xacro'" />
  <node machine="test_host_root" pkg="pr2_etherCAT" type="pr2_etherCAT"
        args="-i eth0 -x robot_description" name="pr2_etherCAT" />

  <!-- Calibration -->
  <group ns="cal_r_gripper" >
    <param name="type" type="str" value="GripperCalibrationController" />
    <param name="actuator" type="str" value="r_gripper_motor" />
    <param name="joint" type="str" value="r_gripper_joint" />
    <param name="velocity" type="double" value="-0.01" />
    <group ns="pid" >
      <param name="p" type="double" value="1500" />
      <param name="i" type="double" value="25" />
      <param name="d" type="double" value="0" />
      <param name="i_clamp" type="double" value="100" />
    </group>
  </group>
  <node pkg="mechanism_bringup" type="calibrate.py"
        args="cal_r_gripper" name="cal_grip" output="screen" />

  <!-- Controller -->
  <group ns="r_gripper_effort_controller" >
    <param name="type" type="str" value="JointEffortController" />
    <param name="joint" type="str" value="r_gripper_joint" />
  </group>
  <node pkg="pr2_mechanism_control" type="spawner.py"
        args="r_gripper_effort_controller" name="grip_spawn"
        output="screen" />

  <!-- Commander -->
  <node pkg="life_test" type="gripper_effort_controller.py"
        args="r_gripper_effort_controller" machine="test_host"
        name="grip_cmder" />

  <!-- Monitor -->
  <node pkg="life_test" type="test_monitor.py"
        name="monitor" machine="test_host" >
    <rosparam command="load" file="$(find life_test)/gripper_life_test/gripper_listeners.yaml" />
  </node>


</launch>
